

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>13. Introduction to Lab Experiments &#8212; Purdue University ENGR 13300</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=ac02cc09edc035673794" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=ac02cc09edc035673794" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=ac02cc09edc035673794" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=ac02cc09edc035673794" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=ac02cc09edc035673794"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'example';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Contributors" href="contributors.html" />
    <link rel="prev" title="12. MATLAB 4" href="M12/overview.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Transforming Ideas to Innovation<br> Laboratory Manual
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="M01/overview.html">1. <strong class="program">MS Excel</strong> 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="M02/overview.html">2. <strong class="program">MS Excel</strong> 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="M03/overview.html">3. <strong class="program">MS Excel</strong> 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="M04/overview.html">4. Teaming</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="M05/overview.html">5. <strong class="program">Python</strong> 1</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="M05/pre-class_material.html">5.3. Pre-Class Material</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="M05/team_assignments.html">5.4. Team Assignments</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="M05/tasks/team_1.html">5.4.3. Task 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="M05/tasks/team_2.html">5.4.4. Task 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="M05/tasks/team_3.html">5.4.5. Task 3 [Required] - Autograded</a></li>
<li class="toctree-l3"><a class="reference internal" href="M05/tasks/team_4.html">5.4.6. Task 4 [Required]</a></li>
<li class="toctree-l3"><a class="reference internal" href="M05/tasks/team_5.html">5.4.7. Task 5</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="M05/ind_assignments.html">5.5. Individual Assignments</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="M05/tasks/ind_1.html">5.5.3. Task 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="M05/tasks/ind_2.html">5.5.4. Task 2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="M06/overview.html">6. <strong class="program">Python</strong> 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="M07/overview.html">7. <strong class="program">Python</strong> 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="M08/overview.html">8. <strong class="program">Python</strong> 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="M09/overview.html">9. <strong class="program">MATLAB</strong> 1</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="M10/overview.html">10. <strong class="program">MATLAB</strong> 2</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="M10/pre-class_material.html">10.4. Pre-Class Material</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="M10/team_assignments.html">10.5. Team Assignments</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="M10/tasks/team_4.html">10.5.3. Task 4</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="M10/ind_assignments.html">10.6. Individual Assignments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="M11/overview.html">11. <strong class="program">MATLAB</strong> 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="M12/overview.html">12. <strong class="program">MATLAB</strong> 4</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">13. Introduction to Lab Experiments</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Purdue-ENGR-13300/site.git" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Purdue-ENGR-13300/site.git/issues/new?title=Issue%20on%20page%20%2Fexample.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/example.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Introduction to Lab Experiments</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">13.1. Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#in-the-laboratory">13.2. In the Laboratory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preliminary-setup-performed-once-at-beginning-of-semester">13.2.1. Preliminary Setup (performed once at beginning of semester)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-target-model">13.2.2. Building Target Model</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postlab-exercise-standalone-simulink-model">13.3. Postlab Exercise: Standalone Simulink model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postlab">13.4. Postlab</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matlab-command-reference">13.5. MATLAB Command Reference</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <p><span class="raw-html"><div class="d-none"></span></p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\newcommand\blank{~\underline{\hspace{1.2cm}}~}\\% Bold symbols (vectors)
\newcommand\bs[1]{\mathbf{#1}}\\% Poor man's siunitx
\newcommand\unit[1]{\mathrm{#1}}
\newcommand\num[1]{#1}
\newcommand\qty[2]{#1~\unit{#2}}\\\newcommand\per{/}
\newcommand\squared{{}^2}
%
% Scale
\newcommand\milli{\unit{m}}
\newcommand\centi{\unit{c}}
\newcommand\kilo{\unit{k}}
\newcommand\mega{\unit{M}}
%
% Angle
\newcommand\radian{\unit{rad}}
\newcommand\degree{\unit{{}^\circ}}
%
% Time
\newcommand\second{\unit{s}}
%
% Distance
\newcommand\meter{\unit{m}}
\newcommand\m{\meter}
\newcommand\inch{\unit{in}}
%
% Mass
\newcommand\gram{\unit{g}}
\newcommand\g{\gram}
%
% Frequency
\newcommand\hertz{\unit{Hz}}
\newcommand\rpm{\unit{rpm}}
%
% Voltage
\newcommand\volt{\unit{V}}
\newcommand\V{\volt}
\newcommand\millivolt{\milli\volt}
\newcommand\mV{\milli\volt}
\newcommand\kilovolt{\kilo\volt}
\newcommand\kV{\kilo\volt}
%
% Current
\newcommand\ampere{\unit{A}}
\newcommand\A{\ampere}
\newcommand\milliampereA{\milli\ampere}
\newcommand\mA{\milli\ampere}
\newcommand\kiloampereA{\kilo\ampere}
\newcommand\kA{\kilo\ampere}
%
% Resistance
\newcommand\ohm{\Omega}
\newcommand\milliohm{\milli\ohm}
\newcommand\kiloohm{\kilo\ohm} % correct SI spelling
\newcommand\kilohm{\kilo\ohm} % &quot;American&quot; spelling used in siunitx
\newcommand\megaohm{\mega\ohm} % correct SI spelling
\newcommand\megohm{\mega\ohm} % &quot;American&quot; spelling used in siunitx
%
% Inductance
\newcommand\henry{\unit{H}}
\newcommand\H{\henry}
\newcommand\millihenry{\milli\henry}
\newcommand\mH{\milli\henry}
%
% Power
\newcommand\watt{\unit{W}}
\newcommand\W{\watt}
\newcommand\milliwatt{\milli\watt}
\newcommand\mW{\milli\watt}
\newcommand\kilowatt{\kilo\watt}
\newcommand\kW{\kilo\watt}
%
% Torque
\newcommand\ozin{\unit{oz}\text{-}\unit{in}}
\newcommand\newtonmeter{\unit{N\text{-}m}}\end{aligned}\end{align} \]</div>
<p><span class="raw-html"></div></span></p>
<section class="tex2jax_ignore mathjax_ignore" id="introduction-to-lab-experiments">
<span id="id1"></span><h1><span class="section-number">13. </span>Introduction to Lab Experiments<a class="headerlink" href="#introduction-to-lab-experiments" title="Permalink to this heading">#</a></h1>
<div class="note admonition">
<p class="admonition-title">Objective</p>
<p>The purpose of this lab session is to introduce the laboratory equipment and
procedures that will be used to characterize the electromechanical devices
studied in ECE 321. The main objectives are to:</p>
<ul class="simple">
<li><p>Introduce the host and target computers, MATLAB/Simulink™ Real
Time Workshop® (RTW), and the patch panel.</p></li>
<li><p>Practice acquiring, storing, and downloading waveforms using the digital
oscilloscope.</p></li>
<li><p>Show how to load data files into MATLAB. Learn MATLAB commands to process the
data.</p></li>
<li><p>Learn how to print oscilloscope and MATLAB graphs.</p></li>
<li><p>Build and run standalone Simulink models.</p></li>
</ul>
</div>
<section id="introduction">
<h2><span class="section-number">13.1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>The primary focus of this lab course is to reinforce experimentally the basic
principles of electromechanical energy conversion taught in ECE321 and to study
the performance of different types of electromechanical devices (solenoids,
motors and generators). To facilitate this learning process, the ECE323 lab has
been furnished with equipment that is intended to simplify the data gathering
and processing aspects of the lab. The computers used in this lab consist of a
target computer (target) equipped with digital-to-analog (D/A) and
analog-to-digital (A/D) converters, and a host computer (host), which is a
conventional desktop PC running Windows 7 operating system and equipped with
MATLAB/Simulink. This host/target computer combination serves as a signal
generator, data acquisition system, signal analyzer, and print server. In this
lab, we will use the computer to run a variety of packaged utilities and
custom-written software.</p>
<p>The workstation “patch panel” is shown in <a class="reference internal" href="#fig-1"><span class="std std-numref">Fig. 13.1</span></a> and has a variety of
functions. The panel includes:</p>
<ol class="arabic simple">
<li><p>Four Analog <span class="math notranslate nohighlight">\(+/-\)</span> Inputs.</p></li>
<li><p>A 25-pin Digital Input port (For use with a position encoder).</p></li>
<li><p>A 9-pin Digital Input port (For use with the Hall Effect sensors on the PM Machines).</p></li>
<li><p>A 15-pin Digital Output port.</p></li>
<li><p>Three high-power analog outputs, each with two BNC connectors for voltage and
current measurements. The upper BNC connector is used to measure voltage and the
lower connector outputs 2 Volts per Amp flowing through the banana plugs.</p></li>
<li><p>Three high-power analog outputs, each with two BNC connectors for voltage and
current measurements. The upper BNC connector is used to measure voltage and the
lower connector outputs 2 Volts per Amp flowing through the banana plugs.</p></li>
</ol>
<p>The patch panel is interfaced to the target computer using a 6-channel D/A board
and a 16-channel A/D board plugged into the computer’s backplane.  The digital
oscilloscope has the ability to capture and store up to 4 channels of data. The
oscilloscope is connected to the host computer through a universal serial bus
(USB) connection.</p>
<figure class="align-default" id="fig-1">
<img alt="_images/fig1n.png" src="_images/fig1n.png" />
<figcaption>
<p><span class="caption-number">Fig. 13.1 </span><span class="caption-text">Patch panel.</span><a class="headerlink" href="#fig-1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>In addition to the standard oscilloscope probes, this lab has been equipped with
an analog torque transducer and two hall-effect current probes. The current
transducers are used by simply clamping the current probe onto the wire to be
monitored and connecting the Tektronix TCPA300 current amplifier output to the
oscilloscope or patch panel. The torque transducer is equipped with a digital
readout, but also has an analog output in the back that can be connected to the
oscilloscope or patch panel.</p>
<p>In this course, we will use the host computer to build Simulink models and  the
target computer D/A outputs to generate signals to drive motors and solenoids.
We will then use probes, transducers, A/D inputs, and the oscilloscope to
capture and display arrays of data that are useful for characterizing the
electromechanical device under study. Data captured on the oscilloscope can be
downloaded to the host computer through its USB connection.  The data can be
displayed on the computer screen, processed using the math utilities included
with MATLAB, printed on the network printer, and stored on your network account
for future reference.</p>
<p>This first lab exercise has been prepared to familiarize you with the equipment
(computers, oscilloscope, transducers, patch panel, printer, power supply), the
computer programs, and the basic procedures that you will be using in future
labs.</p>
</section>
<section id="in-the-laboratory">
<h2><span class="section-number">13.2. </span>In the Laboratory<a class="headerlink" href="#in-the-laboratory" title="Permalink to this heading">#</a></h2>
<div class="note admonition">
<p class="admonition-title">Equipment</p>
<ul class="simple">
<li><p>Computers: Host PC (Windows 7), and Target PC (Speedgoat RealTime Target)</p></li>
<li><p>Oscilloscope: Keysight MSOX3014T 100-Mhz Digital Storage Oscilloscope</p></li>
<li><p>Printer: Network HP printer</p></li>
<li><p>Current Transducer: Tektronix TCPA300 Current Probe Amplifier</p></li>
<li><p>Torque Transducer: Himmelstein MCRT transducer with 700-series Amplifier</p></li>
</ul>
</div>
<section id="preliminary-setup-performed-once-at-beginning-of-semester">
<h3><span class="section-number">13.2.1. </span>Preliminary Setup (performed once at beginning of semester)<a class="headerlink" href="#preliminary-setup-performed-once-at-beginning-of-semester" title="Permalink to this heading">#</a></h3>
<ol class="arabic">
<li><p>From Brightspace, click the icon labelled <span class="guilabel">Lab Files</span>.  This will
download a folder labelled <code class="file docutils literal notranslate"><span class="pre">ECE323_Lab_Files</span></code> into the downloads folder of
your computer.  Extract (unzip) and move this folder into <code class="file docutils literal notranslate"><span class="pre">C:\Users\Your</span> <span class="pre">Name</span></code>.  This folder becomes part of your ecn PC roaming profile.  Navigate to
the <code class="file docutils literal notranslate"><span class="pre">Lab1</span></code> folder in this directory.  Double click the
<code class="file docutils literal notranslate"><span class="pre">ee323lib.slx</span></code> icon in the <code class="file docutils literal notranslate"><span class="pre">Lab1</span></code> folder to start MATLAB in the
given folder (directory).</p></li>
<li><p>In the MATLAB command window, type <strong class="command">slrtExplorer</strong> (<a class="reference internal" href="#fig-2"><span class="std std-numref">Fig. 13.2</span></a>).
After a brief (sometimes long) delay, this will open an
<strong class="command">slrtExplorer</strong> window similar to that shown in <a class="reference internal" href="#fig-3"><span class="std std-numref">Fig. 13.3</span></a>.</p>
<figure class="align-default" id="fig-2">
<img alt="_images/MatlabWindow.png" src="_images/MatlabWindow.png" />
<figcaption>
<p><span class="caption-number">Fig. 13.2 </span><span class="caption-text">MATLAB top-level window.</span><a class="headerlink" href="#fig-2" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="fig-3">
<img alt="_images/SLRTExplorer2.png" src="_images/SLRTExplorer2.png" />
<figcaption>
<p><span class="caption-number">Fig. 13.3 </span><span class="caption-text"><strong class="command">slrtExplorer</strong> window.</span><a class="headerlink" href="#fig-3" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Referring to <a class="reference internal" href="#fig-3"><span class="std std-numref">Fig. 13.3</span></a>, click on <span class="guilabel">add-target</span> icon. This will
create a link to a new target. Enter the name of your lab station and the IP
address of the target computer in your station. Click on the
<span class="guilabel">Change IP Address</span> icon.  MATLAB will attempt to communicate with
the target and notify you if successful.  If not, see TA or instructor.
Finally, click on the <span class="guilabel">connect-to-target</span> icon (<a class="reference internal" href="#fig-3"><span class="std std-numref">Fig. 13.3</span></a>),
which initially displays <span class="guilabel">Disconnected</span>. The display should then
change to <span class="guilabel">Connected</span>.</p>
</li>
</ol>
</section>
<section id="building-target-model">
<h3><span class="section-number">13.2.2. </span>Building Target Model<a class="headerlink" href="#building-target-model" title="Permalink to this heading">#</a></h3>
<ol class="arabic">
<li><p>The Simulink model required to execute this experiment will consist of
blocks from both the Simulink Library Browser and the <code class="file docutils literal notranslate"><span class="pre">ee323lib.slx</span></code>
file.  Bring to focus the Simulink ECE323lib window (<a class="reference internal" href="#fig-ee323lib"><span class="std std-numref">Fig. 13.4</span></a>).
Open the standard Simulink library by clicking the <span class="guilabel">Library Browser</span> button near the top of the window. In top left corner, select
<span class="menuselection">New ‣ Blank Model</span>.  This will open a blank Simulink
window.  Save the model window as <code class="file docutils literal notranslate"><span class="pre">lab1.slx</span></code>.</p>
<figure class="align-default" id="fig-ee323lib">
<img alt="_images/ECE323lib.png" src="_images/ECE323lib.png" />
<figcaption>
<p><span class="caption-number">Fig. 13.4 </span><span class="caption-text">Simulink EE323 library.</span><a class="headerlink" href="#fig-ee323lib" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</li>
<li><p>Construction of the Simulink model begins by copying (<kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ctrl</kbd>-<kbd class="kbd docutils literal notranslate">C</kbd> <kbd class="kbd docutils literal notranslate">Ctrl</kbd>-<kbd class="kbd docutils literal notranslate">V</kbd></kbd>)
or dragging blocks from the standard Simulink library or ECE323lib to the
lab1 model window.  Blocks can be moved within the model by pressing left
mouse button when the cursor hovers above the desired block and dragging to
the desired location. In addition, when the block handles are active, they
can be used to alter the size of the block.  Multiple uses of the same block
will result in automatic incremental labeling of the blocks. To connect the
blocks, click on an arrow of one block, hold button, and drag the mouse to
the termination point.  Use the model blocks from the Simulink Library
Browser and the <code class="file docutils literal notranslate"><span class="pre">ee323lib.slx</span></code> file to construct the waveform generator
model shown in <a class="reference internal" href="#fig-lab1"><span class="std std-numref">Fig. 13.5</span></a>.</p>
<figure class="align-default" id="fig-lab1">
<img alt="_images/lab1.png" src="_images/lab1.png" />
<figcaption>
<p><span class="caption-number">Fig. 13.5 </span><span class="caption-text">Simulink project window for Lab 1.</span><a class="headerlink" href="#fig-lab1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</li>
<li><p>In the model window, double-click on the appropriate source block and use the
mouse and keyboard to set up the following 50-Hz waveforms on the D/A
outputs:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some block parameters are in radians.</p>
</div>
<table class="colwidths-auto table" id="tab-target-model-parameters">
<caption><span class="caption-number">Table 13.1 </span><span class="caption-text">Target model parameters</span><a class="headerlink" href="#tab-target-model-parameters" title="Permalink to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="text-right head"><p>D/A</p></th>
<th class="text-right head"><p>Wave Type</p></th>
<th class="text-right head"><p>Amplitude</p></th>
<th class="text-right head"><p>DC level</p></th>
<th class="text-right head"><p>Phase Shift</p></th>
<th class="text-right head"><p>Oscope</p></th>
<th class="text-right head"><p>Scale</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-right"><p>Ch 1</p></td>
<td class="text-right"><p>Sine</p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{5}{\V}\)</span></p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{0}{\V}\)</span></p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{0}{\degree}\)</span></p></td>
<td class="text-right"><p>Ch 1</p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{5}{\V\per div}\)</span></p></td>
</tr>
<tr class="row-odd"><td class="text-right"><p>Ch 2</p></td>
<td class="text-right"><p>Sine</p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{5}{\V}\)</span></p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{5}{\V}\)</span></p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{-90}{\degree}\)</span></p></td>
<td class="text-right"><p>Ch 2</p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{5}{\V\per div}\)</span></p></td>
</tr>
<tr class="row-even"><td class="text-right"><p>Ch 3</p></td>
<td class="text-right"><p>Square</p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{5}{\V}\)</span></p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{0}{\V}\)</span></p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{0}{\degree}\)</span></p></td>
<td class="text-right"><p>Ch 3</p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{5}{\V\per div}\)</span></p></td>
</tr>
</tbody>
</table>
</li>
<li><p>Simulink Real-Time (slrt) is included in the Simulink software. This software
provides the link between the model code and the test hardware. When a model
is initially created, default parameters define the simulation environment.
Bring to focus the <span class="guilabel">lab1.slx</span> window. Select the
<span class="guilabel">Modeling</span> tab.  Then press <span class="guilabel">Model Settings</span> button.  In
the left column of newly created window, select <span class="guilabel">Solver</span>. The
window should now appear similar to <a class="reference internal" href="#fig-configparam"><span class="std std-numref">Fig. 13.6</span></a>.  Change all
settings to match <a class="reference internal" href="#fig-configparam"><span class="std std-numref">Fig. 13.6</span></a>.</p>
<figure class="align-default" id="fig-configparam">
<img alt="_images/ConfigParam.png" src="_images/ConfigParam.png" />
<figcaption>
<p><span class="caption-number">Fig. 13.6 </span><span class="caption-text">Solver parameters for Lab 1.</span><a class="headerlink" href="#fig-configparam" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Next, select <span class="guilabel">Code Generation</span> in left column of same window, which
should now be similar to <a class="reference internal" href="#fig-codegen"><span class="std std-numref">Fig. 13.7</span></a>. Select System target file to
match that in <a class="reference internal" href="#fig-codegen"><span class="std std-numref">Fig. 13.7</span></a>. Close given window. Bring back to focus
the <span class="guilabel">lab1.slx</span> window, which should now have a tab called
<span class="guilabel">Real Time</span>.  Select this tab. Near top-left corner, select the
target PC and press <span class="guilabel">Disconnect</span> link to connect. If everything was
successful, the top-left link should now display <span class="guilabel">Connected</span>. If
so, press <span class="guilabel">Run on Target</span> button.</p>
<figure class="align-default" id="fig-codegen">
<img alt="_images/CodeGen.png" src="_images/CodeGen.png" />
<figcaption>
<p><span class="caption-number">Fig. 13.7 </span><span class="caption-text">Code generation parameters for Lab 1.</span><a class="headerlink" href="#fig-codegen" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Simulink will now generate and compile code to run on target PC. This may take a minute or two. If successful, the code will automatically download to and start target model. Confirm by looking at the target display.</p>
</li>
<li><p>Connect amplifier Channels 1, 2 and 3 to oscilloscope Channels 1, 2 and 3,
respectively.  Trigger on Channel 1. Adjust the time base to capture 2 cycles
of data. Display all scope channels.</p></li>
<li><p>Apply the D/A Channel 3 voltage to a 25-<span class="math notranslate nohighlight">\(\Omega\)</span> resistor.  Measure the
current by connecting the lower BNC connector to oscilloscope Channel 4.</p></li>
<li><p>To download the oscilloscope data, open <strong class="program">BenchVue</strong> on the host
computer.  Exit the demo screen and select the proper oscilloscope.  You
should see an image of the oscilloscope screen on the host computer.  On the
<span class="guilabel">screen image</span> tab check the boxes that invert colors (so as not to
waste ink or toner when printing), black and white and click <span class="guilabel">get current screen</span>. You should see an image similar to <a class="reference internal" href="#fig-scope"><span class="std std-numref">Fig. 13.8</span></a>.  To
save your screenshot, select <span class="guilabel">Export</span> in the lower right corner of
the <strong class="program">BenchVue</strong> window. Hit <span class="guilabel">browse</span>, and navigate to your
<code class="file docutils literal notranslate"><span class="pre">ECE323</span></code> folder. Select the <code class="file docutils literal notranslate"><span class="pre">lab1</span></code> folder and hit <span class="guilabel">OK</span>.
This will ensure that <strong class="program">BenchVue</strong> saves your screenshot in the
correct location on your account.</p>
<figure class="align-default" id="fig-scope">
<img alt="_images/scope.png" src="_images/scope.png" />
<figcaption>
<p><span class="caption-number">Fig. 13.8 </span><span class="caption-text">Sample screen shot.</span><a class="headerlink" href="#fig-scope" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</li>
<li><p>Next, on the <span class="guilabel">trace data</span> tab, select <span class="guilabel">get current traces</span>.  Export the data into MATLAB.  When saving the file, make sure the
filename you select (e.g.  <code class="file docutils literal notranslate"><span class="pre">lab1\data</span></code>) does not include any spaces.
Also, uncheck the check-box <span class="guilabel">include number</span>.  This will avoid
compatibility issues with MATLAB.</p></li>
<li><p>Exit or close <strong class="program">BenchVue</strong>.  The waveform data will be stored in a
file named <code class="file docutils literal notranslate"><span class="pre">lab1\data.mat</span></code>. The data file contains an <span class="math notranslate nohighlight">\(N \times 2\)</span>
matrix of data for each channel of the oscilloscope screen.  The first column
of each matrix contains the time data. The second column contains the y-axis
data of the signal.  Some commonly used MATLAB commands are listed at the end
of this handout. For more detailed information on using any of these
commands, type <strong class="command">help command</strong> in the MATLAB command window.</p></li>
<li><p>Create and execute an m-file containing the following commands that load
four channels of oscilloscope data into MATLAB workspace:</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">load</span><span class="w"> </span><span class="n">lab1_data</span><span class="p">.</span><span class="n">mat</span>
<span class="nb">time</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Trace_1</span><span class="p">(:,</span><span class="mi">1</span><span class="p">);</span>
<span class="n">channel1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Trace_1</span><span class="p">(:,</span><span class="mi">2</span><span class="p">);</span>
<span class="n">channel2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Trace_2</span><span class="p">(:,</span><span class="mi">2</span><span class="p">);</span>
<span class="n">channel3</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Trace_3</span><span class="p">(:,</span><span class="mi">2</span><span class="p">);</span>
<span class="n">channel4</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Trace_4</span><span class="p">(:,</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
<p>Plot the four channels of data on the computer screen using the MATLAB
commands plot and subplot. Add a title, labels, and grid. Make a hard copy
printout of the plot.</p>
</li>
<li><p>For each channel, compute the average and RMS values of the signals. This
can be accomplished by creating MATLAB programs. Using the m-file editor,
write the following MATLAB commands and save in file avg.m.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">avsum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="nb">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nb">length</span><span class="p">(</span><span class="n">channel1</span><span class="p">)</span>
<span class="w">    </span><span class="n">avsum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">avsum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">channel1</span><span class="p">(</span><span class="nb">i</span><span class="p">);</span>
<span class="k">end</span>
<span class="n">av</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">avsum</span><span class="o">/</span><span class="nb">length</span><span class="p">(</span><span class="n">channel1</span><span class="p">);</span>
</pre></div>
</div>
<p>When in the MATLAB command window, type <code class="docutils literal notranslate"><span class="pre">avg</span></code>. The average value of the
Channel 1 data will be computed. Repeat this for Channels 2, 3, and 4.
Create a MATLAB program to compute the RMS value of each channel.  Do NOT
use the built-in MATLAB <code class="docutils literal notranslate"><span class="pre">rms</span></code> command.  The RMS value of a continuous signal
is defined as</p>
<div class="math notranslate nohighlight" id="equation-eq-rms">
<span class="eqno">(13.1)<a class="headerlink" href="#equation-eq-rms" title="Permalink to this equation">#</a></span>\[\hat x = \sqrt {\frac{1}{T}\int_0^T {{x^2}(t)dt} }.\]</div>
<p>The discrete counterpart is</p>
<div class="math notranslate nohighlight" id="equation-eq-discrete-rms">
<span class="eqno">(13.2)<a class="headerlink" href="#equation-eq-discrete-rms" title="Permalink to this equation">#</a></span>\[\hat x = \sqrt{\frac{1}{N}\sum_{n = 0}^N {{x^2}(n)} }
%\hat x = \sqrt{\frac{1}{N}\sum\nolimits_{n = 0}^N {{x^2}(n)} }\]</div>
<p>where <span class="math notranslate nohighlight">\(N\)</span> is the number of samples in an integer number of periods of the
signal.  For those who would like to learn more about MATLAB, there are
numerous MATLAB reference books available at local bookstores. Also, there
is extensive online help - simply type help from the MATLAB command line.
Write the results of the calculations on the printouts of the generated
plots.  Do the results look reasonable?</p>
</li>
<li><p>Staple and turn in all printouts with you name on top of all pages.</p></li>
</ol>
</section>
</section>
<section id="postlab-exercise-standalone-simulink-model">
<h2><span class="section-number">13.3. </span>Postlab Exercise: Standalone Simulink model<a class="headerlink" href="#postlab-exercise-standalone-simulink-model" title="Permalink to this heading">#</a></h2>
<p>In this part, we will develop a standalone computer simulation on the host
computer using Simulink.  The purpose is to become familiarized with some of the
basic building blocks of Simulink, to build a model of a simple dynamic system,
learn the steps needed to perform a simulation study and to generate annotated
and labelled plots.</p>
<ol class="arabic">
<li><p>Consider the equivalent circuit shown in <a class="reference internal" href="#fig-ckt"><span class="std std-numref">Fig. 13.9</span></a>. Using the basic
equations of an inductor (<span class="math notranslate nohighlight">\(v=L\frac{di}{dt}\)</span>), and Kirchhoff’s voltage law
(KVL), express the dynamic equations of the circuit in the following form</p>
<figure class="align-default" id="fig-ckt">
<img alt="_images/xfmer.png" src="_images/xfmer.png" />
<figcaption>
<p><span class="caption-number">Fig. 13.9 </span><span class="caption-text">Example circuit.</span><a class="headerlink" href="#fig-ckt" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="math notranslate nohighlight" id="equation-eq-kvl">
<span class="eqno">(13.3)<a class="headerlink" href="#equation-eq-kvl" title="Permalink to this equation">#</a></span>\[\begin{split}\begin{bmatrix}
  v_1 \\
    0 \\
\end{bmatrix}
=
\begin{bmatrix}
  \blank &amp; \blank \\
  \blank &amp; \blank \\
\end{bmatrix}
\begin{bmatrix}
   i_1 \\
   i_2^\prime \\
\end{bmatrix}
+
\begin{bmatrix}
  \blank &amp; \blank \\
  \blank &amp; \blank \\
\end{bmatrix}
\frac{d}{{dt}}
\begin{bmatrix}
   i_1 \\
   i_2^\prime \\
\end{bmatrix}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(i_1\)</span> and <span class="math notranslate nohighlight">\(i_2^\prime\)</span> are the so-called state variables. Replace each
of the blanks with expressions involving the circuit parameters. The previous
equation may be expressed symbolically as</p>
<div class="math notranslate nohighlight" id="equation-eq-vector-kvl">
<span class="eqno">(13.4)<a class="headerlink" href="#equation-eq-vector-kvl" title="Permalink to this equation">#</a></span>\[\mathbf{v} = \mathbf{Ri} + \mathbf{L} \frac{d}{dt} \mathbf{i}\]</div>
<p>Equivalently</p>
<div class="math notranslate nohighlight" id="equation-eq-vector-kvl-for-di-dt">
<span class="eqno">(13.5)<a class="headerlink" href="#equation-eq-vector-kvl-for-di-dt" title="Permalink to this equation">#</a></span>\[\frac{d}{dt} \mathbf{i} = \mathbf{L}^{-1} ( \mathbf{v} - \mathbf{Ri} )\]</div>
<p>We will build a Simulink model based on this equation. The parameters are
given in <a class="reference internal" href="#tab-model-parameters"><span class="std std-numref">Table 13.2</span></a>.</p>
<table class="colwidths-auto table" id="tab-model-parameters">
<caption><span class="caption-number">Table 13.2 </span><span class="caption-text">Model parameters.</span><a class="headerlink" href="#tab-model-parameters" title="Permalink to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="text-right head"><p><span class="math notranslate nohighlight">\(r_1\)</span></p></th>
<th class="text-right head"><p><span class="math notranslate nohighlight">\(r_2^\prime\)</span></p></th>
<th class="text-right head"><p><span class="math notranslate nohighlight">\(L_{l1}\)</span></p></th>
<th class="text-right head"><p><span class="math notranslate nohighlight">\(L_{l2}^\prime\)</span></p></th>
<th class="text-right head"><p><span class="math notranslate nohighlight">\(L_{m1}\)</span></p></th>
<th class="text-right head"><p><span class="math notranslate nohighlight">\(R_{L}\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{0.1}{\ohm}\)</span></p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{0.1}{\ohm}\)</span></p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{1}{\mH}\)</span></p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{1}{mH}\)</span></p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{10}{\mH}\)</span></p></td>
<td class="text-right"><p><span class="math notranslate nohighlight">\(\qty{1.9}{\ohm}\)</span></p></td>
</tr>
</tbody>
</table>
</li>
<li><p>Launch MATLAB, then launch Simulink by pressing the <span class="guilabel">Simulink</span> icon
shown in <a class="reference internal" href="#fig-blanksimulink"><span class="std std-numref">Fig. 13.10</span></a>.  This opens a blank Simulink model
window similar to that shown in <a class="reference internal" href="#fig-blanksimulink"><span class="std std-numref">Fig. 13.10</span></a>.  Note that the
default name of the model is <code class="file docutils literal notranslate"><span class="pre">untitled</span></code>.  Immediately save this model
as <code class="file docutils literal notranslate"><span class="pre">mylab1.slx</span></code>.  It is useful to save often since Simulink may
occasionally “crash” causing all work since the last save to be lost.  Press
the <span class="guilabel">Simulink Library</span> icon to open the <span class="guilabel">Simulink Library Browser</span>.  From the <span class="guilabel">Simulink Library</span>, open <span class="guilabel">Commonly Used Blocks</span>.</p>
<figure class="align-default" id="fig-blanksimulink">
<img alt="_images/fig7.png" src="_images/fig7.png" />
<figcaption>
<p><span class="caption-number">Fig. 13.10 </span><span class="caption-text">Blank Simulink model window.</span><a class="headerlink" href="#fig-blanksimulink" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</li>
<li><p>Drag the following blocks from the browser into the empty model window:
<span class="guilabel">Sum</span>, <span class="guilabel">Integrator</span>, <span class="guilabel">Gain</span>, <span class="guilabel">Scope</span>,
<span class="guilabel">Constant</span>, and <span class="guilabel">Mux</span>.  From <span class="guilabel">Simulink/Sinks</span>
in the <span class="guilabel">Library Browser</span>, drag the <span class="guilabel">To Workspace</span> block
into the model window.  From <span class="guilabel">Simulink/Sources</span>, drag the
<span class="guilabel">Sine Wave</span> block into the model window.</p></li>
<li><p>If the input of the <span class="guilabel">Integrator</span> is set to the right-hand side of
<a class="reference internal" href="#equation-eq-vector-kvl-for-di-dt">(13.5)</a>, which is <span class="math notranslate nohighlight">\(d\mathbf{i}/dt\)</span>, then the output
becomes <span class="math notranslate nohighlight">\(\mathbf{i}\)</span>.  Note that Simulink uses the Laplace operator <span class="math notranslate nohighlight">\(1/s\)</span> to
denote integration with respect to time.  This might lead some to believe
that Laplace, transform techniques are used to solve the differential
equations; however, this is definitely not the case.  This is just a symbolic
way to say that the output is equal to the input integrated with respect to
time.  By dragging and connecting the inputs and outputs of the various
blocks in accordance with <a class="reference internal" href="#equation-eq-vector-kvl-for-di-dt">(13.5)</a>, form a Simulink
model of the given circuit similar to that shown in Figure
<a class="reference internal" href="#fig-simmdl"><span class="std std-numref">Fig. 13.11</span></a>.</p>
<figure class="align-default" id="fig-simmdl">
<img alt="_images/fig8.png" src="_images/fig8.png" />
<figcaption>
<p><span class="caption-number">Fig. 13.11 </span><span class="caption-text">Simulink model.</span><a class="headerlink" href="#fig-simmdl" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</li>
<li><p>In this model, the directed lines (lines with arrows) in the Simulink model
represent 2-dimensional signals that connect the output of a block to the
input of another block. The two components of the output of the integrator
block represent <span class="math notranslate nohighlight">\(i_1\)</span> and <span class="math notranslate nohighlight">\(i_2^\prime\)</span>.  In accordance with
<a class="reference internal" href="#equation-eq-vector-kvl-for-di-dt">(13.5)</a>, the gain in the triangular block preceding the
<span class="guilabel">Integrator</span> must be set to <span class="math notranslate nohighlight">\(\mathbf{L}^{-1}\)</span>.  This is
accomplished by double-clicking the <span class="guilabel">Gain</span> block to open its dialog
window.  In this window, select <span class="guilabel">Matix (K*u)</span> from the pull-down
field labelled <span class="guilabel">multiplication</span> and type <strong class="command">inv(L)</strong> into the
text field labeled <span class="guilabel">Gain</span>.  You may wish to read more about this
block by pressing the help button to open its documentation window.  Follow
similar steps to set the gain of the other gain block <span class="guilabel">Gain1</span> to
<strong class="command">R</strong>.  We will describe how to define the values of <strong class="command">L</strong> and
<strong class="command">R</strong> a little later.</p></li>
<li><p>The voltage vector <span class="math notranslate nohighlight">\(\textbf{v}\)</span> in <a class="reference internal" href="#equation-eq-vector-kvl-for-di-dt">(13.5)</a> is a
2-dimensional vector. However, the output of the <span class="guilabel">Sine-Wave</span> block
is a scalar signal.  To form a 2-dimensional voltage vector, a multiplexer or
<span class="guilabel">mux</span> block is used as shown in <a class="reference internal" href="#fig-simmdl"><span class="std std-numref">Fig. 13.11</span></a>.  This block
converts the two scalar signals into one 2-dimensional signal.  The summer
accepts two 2-dimensional inputs and outputs a 2-dimensional signal.  If the
inputs were of differing dimensions, an error message would be produced when
attempting to run the model.</p></li>
<li><p>Double-click the <span class="guilabel">Integrator</span> block to open its dialog window. In
the dialog window, set the initial condition to <strong class="command">[0;0]</strong>.</p></li>
<li><p>To set the parameters for the model, you will create a MATLAB script file
named <code class="file docutils literal notranslate"><span class="pre">init.m</span></code> where you will define the values of all parameters. For
example,</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">r_1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span><span class="w"> </span><span class="c">% primary resistance in Ohms</span>
<span class="k">...</span>
<span class="n">L_l1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">1e-3</span><span class="p">;</span><span class="w"> </span><span class="c">% primary leakage inductance in Henries</span>
<span class="k">...</span>
<span class="n">L</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span>?<span class="w"> </span>?<span class="p">;</span><span class="w"> </span>?<span class="w"> </span>?<span class="p">];</span>
<span class="n">R</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span>?<span class="w"> </span>?<span class="p">;</span><span class="w"> </span>?<span class="w"> </span>?<span class="p">];</span>
<span class="k">...</span>
</pre></div>
</div>
<p>When you run the script file, the parameters are loaded into the MATLAB
workspace.  The Simulink model has access to all workspace variables.</p>
</li>
<li><p>Double-click the <span class="guilabel">Sine Wave</span> icon to open its dialog window.  Set
the amplitude to 100 (volts peak) and frequency to
<span class="math notranslate nohighlight">\(\qty{400}{\radian\per\second}\)</span>.</p></li>
<li><p>Before running the simulation, go to the top menu in the Simulink model
window and select the <span class="guilabel">Modelling</span> tab. Then press <span class="guilabel">Model Settings</span> icon.  This will open a very important dialog window.  Set the
<span class="guilabel">solver type</span> to <strong class="command">variable step</strong>, the <span class="guilabel">maximum step size</span> to <strong class="command">0.1</strong>, the <span class="guilabel">minimum step size</span> to
<strong class="command">1e-20</strong>, and the <span class="guilabel">solver</span> to <span class="guilabel">ode23s</span>.  Also,
set <span class="guilabel">tstop</span> to <strong class="command">0.5</strong>. Step sizes and <span class="guilabel">tstop</span>
have units of seconds.  Leave the other parameter set to their default
values.  Double-click the <span class="guilabel">To Workspace</span> block. Make sure the save
format is set to <span class="guilabel">Timeseries</span> and <span class="guilabel">sample time</span> to
<strong class="command">-1</strong>.</p></li>
<li><p>You are now ready to make a study. Before you do <span class="guilabel">Save</span>!  Then
press the <span class="guilabel">Run</span> icon.  You can double-click the <span class="guilabel">Scope</span>
to see if the run is successful.</p></li>
<li><p>Although you can print the Scope data from the Scope window, it is
preferable instead to generate labelled and annotated printable figures from
MATLAB.  Create another script file and label it <code class="file docutils literal notranslate"><span class="pre">plotresults.m</span></code>.
Enter the following lines</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="nb">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">simout</span><span class="p">.</span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">simout</span><span class="p">.</span><span class="n">Data</span><span class="p">(:,</span><span class="mi">1</span><span class="p">))</span>
<span class="nb">title</span><span class="p">(</span><span class="s">&#39;i_1&#39;</span><span class="p">)</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s">&#39;time (sec)&#39;</span><span class="p">)</span>

<span class="nb">figure</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">plot</span><span class="p">(</span><span class="n">simout</span><span class="p">.</span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">simout</span><span class="p">.</span><span class="n">Data</span><span class="p">(:,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">title</span><span class="p">(</span><span class="s">&#39;i_2^\prime&#39;</span><span class="p">)</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s">&#39;time (sec)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>From the two figure windows, use <span class="guilabel">Tools/Data Cursor</span> to determine
the peak values of <span class="math notranslate nohighlight">\(I_1(t)\)</span> and <span class="math notranslate nohighlight">\(I_2^\prime (t)\)</span> [steady-state <span class="math notranslate nohighlight">\(i_1(t)\)</span> and
<span class="math notranslate nohighlight">\(i_2^\prime(t)\)</span>].  Save the figures as <code class="file docutils literal notranslate"><span class="pre">.png</span></code> files.</p>
</li>
</ol>
</section>
<section id="postlab">
<h2><span class="section-number">13.4. </span>Postlab<a class="headerlink" href="#postlab" title="Permalink to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Using phasor analysis, calculate <span class="math notranslate nohighlight">\(\tilde{I}_1\)</span> and <span class="math notranslate nohighlight">\(\tilde{I}_2^\prime\)</span>.
Express <span class="math notranslate nohighlight">\(I_1(t)\)</span> and <span class="math notranslate nohighlight">\(I_2^\prime(t)\)</span>.  What are their peak values?  Compare
the calculated results with the simulated values established in lab.</p></li>
<li><p>Submit printouts of the generated plots and all supporting calculations.  If
you used MATLAB to perform calculations, submit the script file or command
history.</p></li>
</ol>
</section>
<section id="matlab-command-reference">
<h2><span class="section-number">13.5. </span>MATLAB Command Reference<a class="headerlink" href="#matlab-command-reference" title="Permalink to this heading">#</a></h2>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Command</p></th>
<th class="text-left head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">load</span> <span class="pre">file</span></code></p></td>
<td class="text-left"><p>Load data stored in <code class="file docutils literal notranslate"><span class="pre">file</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">save</span> <span class="pre">array</span> <span class="pre">file</span></code></p></td>
<td class="text-left"><p>Store a variable array into <code class="file docutils literal notranslate"><span class="pre">file.mat</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">fft(array)</span></code></p></td>
<td class="text-left"><p>returns a complex array of fft harmonic components</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">^2</span></code>, <code class="docutils literal notranslate"><span class="pre">sqrt()</span></code></p></td>
<td class="text-left"><p>square/square root of a variable</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">sign</span></code>, <code class="docutils literal notranslate"><span class="pre">abs(array)</span></code></p></td>
<td class="text-left"><p>sign/absolute value of a variable/array</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">sin</span></code>, <code class="docutils literal notranslate"><span class="pre">cos</span></code>, <code class="docutils literal notranslate"><span class="pre">tan</span></code></p></td>
<td class="text-left"><p>sine/cosine/tangent of angle (in radians)</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">asin</span></code>, <code class="docutils literal notranslate"><span class="pre">acos</span></code>, <code class="docutils literal notranslate"><span class="pre">atan</span></code></p></td>
<td class="text-left"><p>arcsin, arccosine, arctangent</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">sinh</span></code>, <code class="docutils literal notranslate"><span class="pre">cosh</span></code>, <code class="docutils literal notranslate"><span class="pre">tanh</span></code></p></td>
<td class="text-left"><p>hyperbolic sine, hyperbolic cosine, hyperbolic tangent</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">length(array)</span></code></p></td>
<td class="text-left"><p>number of elements in an array</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>, <code class="docutils literal notranslate"><span class="pre">mean</span></code></p></td>
<td class="text-left"><p>minimum, maximum, and mean of an array</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">plot(x,y,x,y..)</span></code></p></td>
<td class="text-left"><p>create a screen plot of the arrays y vs x. Also used as <code class="docutils literal notranslate"><span class="pre">plot(y)</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">title('myplot')</span></code></p></td>
<td class="text-left"><p>Add a title to a screen plot</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">xlabel('horiz')</span></code></p></td>
<td class="text-left"><p>Add an x axis label to a screen plot</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ylabel('vert')</span></code></p></td>
<td class="text-left"><p>Add a y axis label to a screen plot</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">grid</span></code></p></td>
<td class="text-left"><p>Add grid lines to a screen plot</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">print</span></code></p></td>
<td class="text-left"><p>Dump the screen plot to the printer</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">whos</span></code></p></td>
<td class="text-left"><p>List current variables and sizes in memory</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">clear</span> <span class="pre">array</span></code></p></td>
<td class="text-left"><p>remove a variable/array from memory</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">...</span></code></p></td>
<td class="text-left"><p>ellipsis for continuation of long lines</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Other Misc.</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">!</span> <span class="pre">syscommand</span></code></p></td>
<td class="text-left"><p>Execute a system command</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">dir</span></code> or <code class="docutils literal notranslate"><span class="pre">ls</span></code></p></td>
<td class="text-left"><p>list DOS files in current directory</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">help</span> <span class="pre">?</span></code></p></td>
<td class="text-left"><p>List MATLAB commands and script (.m) files</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">quit</span></code> or <code class="docutils literal notranslate"><span class="pre">exit</span></code></p></td>
<td class="text-left"><p>end MATLAB program</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">linspace(x1,x2,N)</span></code></p></td>
<td class="text-left"><p>generates N points between x1 and x2</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">hold</span> <span class="pre">on</span></code></p></td>
<td class="text-left"><p>subsequent plot commands add to existing plot</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">subplot</span></code></p></td>
<td class="text-left"><p>create a “vector” or “matrix” of plots</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">figure</span></code></p></td>
<td class="text-left"><p>open a new figure window for plotting</p></td>
</tr>
</tbody>
</table>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="M12/overview.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">12. </span><strong class="program">MATLAB</strong> 4</p>
      </div>
    </a>
    <a class="right-next"
       href="contributors.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Contributors</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">13.1. Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#in-the-laboratory">13.2. In the Laboratory</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preliminary-setup-performed-once-at-beginning-of-semester">13.2.1. Preliminary Setup (performed once at beginning of semester)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-target-model">13.2.2. Building Target Model</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postlab-exercise-standalone-simulink-model">13.3. Postlab Exercise: Standalone Simulink model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#postlab">13.4. Postlab</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matlab-command-reference">13.5. MATLAB Command Reference</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By <a href="contributors.html">Contributors</a>
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023 All rights reserved by Purdue University.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=ac02cc09edc035673794"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=ac02cc09edc035673794"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>